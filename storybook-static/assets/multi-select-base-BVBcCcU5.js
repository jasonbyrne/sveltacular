import{p as et,A as n,ac as tt,c as at,j as it,g as e,i as q,f as j,a as I,k as b,s as R,e as N,l as W,b as o,h as l,C as M,F as nt,t as z,u as O,D as _e,m as ne}from"./iframe-D7RYvwF5.js";import{e as lt}from"./each-ldT_kV30.js";import{s as C}from"./attributes-AHszVgQG.js";import{s as st}from"./class-CSG4cUfb.js";import{a as rt}from"./input-CeMRp2yv.js";import{b as we}from"./this-p55_KPOp.js";import{u as dt}from"./unique-id-JjuMjhtj.js";import{F as ut}from"./form-field-De-aDgvW.js";import{C as ot}from"./chip-Dujg20l0.js";import{M as ft}from"./menu-Dbx_mKWU.js";var ct=j('<div class="loading-indicator svelte-lvkiui" aria-hidden="true"><div class="spinner svelte-lvkiui"></div></div>'),vt=j('<div class="no-results svelte-lvkiui" role="status">No results found</div>'),yt=j('<div class="dropdown svelte-lvkiui"><!> <!></div>'),pt=j('<div class="items svelte-lvkiui"></div>'),mt=j('<div class="sr-only svelte-lvkiui" role="status" aria-live="polite" aria-atomic="true"><!></div> <div class="multi-select-base svelte-lvkiui"><div class="input-container svelte-lvkiui"><div><input type="text" role="combobox" aria-autocomplete="list" aria-haspopup="listbox" class="svelte-lvkiui"/> <!> <!></div></div> <!> <!></div>',1);function bt(Ie,t){et(t,!0);const X=dt(),Y=`${X}-listbox`;let y=n(t,"value",31,()=>it([])),Me=n(t,"placeholder",3,"Search and add items..."),le=n(t,"required",3,!1),L=n(t,"disabled",3,!1),Ve=n(t,"menuOptions",19,()=>[]),Oe=n(t,"size",3,"md"),Ce=n(t,"label",3,void 0),Le=n(t,"helperText",3,void 0),Te=n(t,"feedback",3,void 0),Z=n(t,"maxItems",3,void 0),se=n(t,"onChange",3,void 0),Se=n(t,"filterSuggestions",3,!0),$=n(t,"caseInsensitive",3,!0),K=n(t,"isLoading",3,!1),re=n(t,"onInputChange",3,void 0),de=n(t,"separators",19,()=>[]),De=n(t,"deleteOnBackspace",3,!1),Fe=n(t,"showNoResults",3,!1),ue=n(t,"additionalDropdownContent",3,void 0),oe=n(t,"inputSuffix",3,void 0),fe=n(t,"invalidFeedbackMessage",3,void 0),qe=n(t,"ariaLabel",3,"Multi-select input"),f=q(""),c=q(!1),u=q(-1),P=q(null),U=q(null),T=q(!1),ee=M(()=>Ve().filter(a=>!y().some(r=>t.adapter.equals(r,t.adapter.fromMenuOption(a))))),s=M(()=>{if(!Se()||!e(f).trim())return e(ee);const a=e(f).trim(),r=$()?a.toLowerCase():a;return e(ee).filter(d=>($()?d.label.toLowerCase():d.label).includes(r))});function ce(){return Z()!==void 0&&y().length>=Z()}function S(a){var r;if(ce()){ve();return}if(y().some(d=>t.adapter.equals(d,a))){ve();return}y([...y(),a]),l(f,""),l(T,!1),l(c,!1),l(u,-1),(r=se())==null||r(y()),e(P)&&e(P).focus()}function ve(){l(T,!0),setTimeout(()=>{l(T,!1)},500)}function ye(a){var r;y(y().filter(d=>!t.adapter.equals(d,a))),(r=se())==null||r(y())}function Re(a){if(!L()){if(a.key==="Escape"){a.preventDefault(),te();return}if(a.key==="Enter"){if(a.preventDefault(),e(c)&&e(u)>=0&&e(s)[e(u)]){const r=e(s)[e(u)];S(t.adapter.fromMenuOption(r))}else e(c)&&e(s).length===1&&S(t.adapter.fromMenuOption(e(s)[0]));return}if(a.key==="Tab"){if(e(c)&&e(u)>=0&&e(s)[e(u)]){a.preventDefault();const r=e(s)[e(u)];S(t.adapter.fromMenuOption(r))}else e(c)&&e(s).length===1&&(a.preventDefault(),S(t.adapter.fromMenuOption(e(s)[0])));return}if(a.key==="Backspace"&&e(f)===""&&y().length>0&&De()){ye(y()[y().length-1]);return}if(a.key==="ArrowDown"){a.preventDefault(),!e(c)&&e(s).length>0&&pe(),e(s).length>0&&l(u,Math.min(e(u)+1,e(s).length-1),!0);return}if(a.key==="ArrowUp"){a.preventDefault(),e(c)&&e(s).length>0&&l(u,Math.max(e(u)-1,0),!0);return}}}function Ee(a){var x,G;const d=a.target.value;if(l(T,!1),de().length>0&&d.length>0){const ae=d[d.length-1];if(de().includes(ae)){const H=d.slice(0,-1).trim();H?(l(f,H,!0),(x=re())==null||x(e(f)),l(f,"")):l(f,"");return}}d.trim()&&e(s).length>0?(pe(),l(u,0)):d.trim()||te(),(G=re())==null||G(d)}function pe(){!L()&&e(s).length>0&&l(c,!0)}function te(){l(c,!1),l(u,-1)}function Ae(a){S(t.adapter.fromMenuOption(a))}let Be=M(()=>e(u)>=0&&e(s)[e(u)]?`${Y}-option-${e(u)}`:void 0),me=M(()=>Fe()&&e(f).trim()&&e(s).length===0&&!K());tt(()=>{const a=r=>{e(U)&&!e(U).contains(r.target)&&te()};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}});function Ne(a){const r=a||e(f);if(!r.trim())return!1;const d=e(ee).find(x=>$()?x.label.toLowerCase()===r.trim().toLowerCase():x.label===r.trim());return d?(S(t.adapter.fromMenuOption(d)),!0):!1}function ze(){l(f,"")}function je(){return e(f)}function Ke(a){l(f,a,!0)}var Pe={addFromInput:Ne,clearInput:ze,getInputText:je,setInputText:Ke};return ut(Ie,{get size(){return Oe()},get label(){return Ce()},get id(){return X},get required(){return le()},get disabled(){return L()},get helperText(){return Le()},get feedback(){return Te()},children:(a,r)=>{var d=mt(),x=I(d),G=N(x);{var ae=i=>{var v=z("Loading...");o(i,v)},H=i=>{var v=O(),g=I(v);{var h=k=>{var _=z();W(()=>ne(_,`${e(s).length??""}
			${e(s).length===1?"suggestion":"suggestions"} available`)),o(k,_)},E=k=>{var _=O(),m=I(_);{var w=V=>{var J=O(),A=I(J);{var ie=D=>{var B=z();W(()=>ne(B,fe())),o(D,B)},Xe=D=>{var B=O(),Ye=I(B);{var Ze=F=>{var Q=z();W(()=>ne(Q,`Maximum ${Z()??""} items reached`)),o(F,Q)},$e=F=>{var Q=z("Item already exists");o(F,Q)};b(Ye,F=>{ce()?F(Ze):F($e,!1)},!0)}o(D,B)};b(A,D=>{fe()?D(ie):D(Xe,!1)})}o(V,J)};b(m,V=>{e(T)&&V(w)},!0)}o(k,_)};b(g,k=>{e(c)&&e(s).length>0?k(h):k(E,!1)},!0)}o(i,v)};b(G,i=>{e(c)&&K()?i(ae):i(H,!1)})}var be=R(x,2),ge=N(be),ke=N(ge),p=N(ke);p.__keydown=Re,p.__input=Ee,we(p,i=>l(P,i),()=>e(P));var xe=R(p,2);{var Ue=i=>{var v=ct();o(i,v)};b(xe,i=>{K()&&i(Ue)})}var Ge=R(xe,2);{var He=i=>{var v=O(),g=I(v);_e(g,oe),o(i,v)};b(Ge,i=>{oe()&&i(He)})}var he=R(ge,2);{var Je=i=>{var v=yt(),g=N(v);{var h=m=>{var w=vt();o(m,w)},E=m=>{var w=O(),V=I(w);{var J=A=>{ft(A,{get items(){return e(s)},get open(){return e(c)},closeAfterSelect:!0,get searchText(){return e(f)},onSelect:Ae,get listboxId(){return Y},get highlightIndex(){return e(u)},set highlightIndex(ie){l(u,ie,!0)}})};b(V,A=>{e(s).length>0&&A(J)},!0)}o(m,w)};b(g,m=>{e(me)?m(h):m(E,!1)})}var k=R(g,2);{var _=m=>{var w=O(),V=I(w);_e(V,ue),o(m,w)};b(k,m=>{ue()&&m(_)})}o(i,v)};b(he,i=>{(e(c)||e(me))&&i(Je)})}var Qe=R(he,2);{var We=i=>{var v=pt();lt(v,21,y,g=>t.adapter.getKey(g),(g,h)=>{{let E=M(()=>t.adapter.getLabel(e(h))),k=M(()=>!L()),_=M(()=>t.adapter.getLink&&t.adapter.getLink(e(h))?{url:t.adapter.getLink(e(h)),target:"_blank"}:void 0),m=M(()=>t.adapter.getTooltip?t.adapter.getTooltip(e(h)):void 0);ot(g,{get label(){return e(E)},get removable(){return e(k)},onRemove:()=>ye(e(h)),get link(){return e(_)},get tooltip(){return e(m)}})}}),o(i,v)};b(Qe,i=>{y().length>0&&i(We)})}we(be,i=>l(U,i),()=>e(U)),W(()=>{st(ke,1,`input ${L()?"disabled":"enabled"} ${e(T)?"invalid":""} ${e(c)?"open":""}`,"svelte-lvkiui"),C(p,"id",X),C(p,"placeholder",Me()),p.disabled=L(),p.required=le(),C(p,"aria-expanded",e(c)),C(p,"aria-controls",Y),C(p,"aria-activedescendant",e(Be)),C(p,"aria-label",qe()),C(p,"aria-busy",K())}),rt(p,()=>e(f),i=>l(f,i)),o(a,d)},$$slots:{default:!0}}),at(Pe)}nt(["keydown","input"]);bt.__docgen={data:[{name:"value",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"T[]"},static:!1,readonly:!1,defaultValue:"..."},{name:"adapter",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"object",text:"MultiSelectAdapter<T>"},static:!1,readonly:!1},{name:"placeholder",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"Search and add items..."'},{name:"required",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"disabled",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"menuOptions",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"ReferenceItem[]"},static:!1,readonly:!1,defaultValue:"..."},{name:"size",visibility:"public",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"xs",text:'"xs"'},{kind:"const",type:"string",value:"sm",text:'"sm"'},{kind:"const",type:"string",value:"md",text:'"md"'},{kind:"const",type:"string",value:"lg",text:'"lg"'},{kind:"const",type:"string",value:"xl",text:'"xl"'}],text:'"xs" | "sm" | "md" | "lg" | "xl"'},static:!1,readonly:!1,defaultValue:"..."},{name:"label",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"helperText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"feedback",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"intersection",text:"FormFieldMessage & { details?: FormFieldMessage[] | undefined; }"},static:!1,readonly:!1,defaultValue:"..."},{name:"maxItems",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"..."},{name:"onChange",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"(value: T[]) => void"},static:!1,readonly:!1,defaultValue:"..."},{name:"filterSuggestions",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"caseInsensitive",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"isLoading",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"onInputChange",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"(text: string) => void"},static:!1,readonly:!1,defaultValue:"..."},{name:"separators",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"string[]"},static:!1,readonly:!1,defaultValue:"..."},{name:"deleteOnBackspace",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"showNoResults",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"additionalDropdownContent",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[]>"},static:!1,readonly:!1,defaultValue:"..."},{name:"inputSuffix",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[]>"},static:!1,readonly:!1,defaultValue:"..."},{name:"invalidFeedbackMessage",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"ariaLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"Multi-select input"'}],name:"multi-select-base.svelte"};export{bt as M};
