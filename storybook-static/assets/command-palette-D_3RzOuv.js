var st=Object.defineProperty;var at=(a,e,s)=>e in a?st(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var Q=(a,e,s)=>at(a,typeof e!="symbol"?e+"":e,s);import{Q as ot,I as nt,a8 as lt,L as rt,aM as dt,p as ct,A as C,i as W,j as ut,ac as ge,u as te,a as ie,k as D,b as x,c as mt,h as _,g as i,F as pt,f as A,e as k,s as I,C as z,l as G,m as se,aN as ft,D as ht}from"./iframe-D7RYvwF5.js";import{e as we,i as xe}from"./each-ldT_kV30.js";import{h as Ce}from"./icon-v8TPefiR.js";import{s as q}from"./attributes-AHszVgQG.js";import{s as Re,c as vt}from"./class-CSG4cUfb.js";import{a as yt}from"./input-CeMRp2yv.js";import{b as kt}from"./this-p55_KPOp.js";import{O as bt}from"./overlay-oqNK3s9E.js";import{c as _t,d as gt,e as wt}from"./animations-2Xgw79Wl.js";function Me(a,e,s){ot(()=>{var o=nt(()=>e(a,s==null?void 0:s())||{});if(s&&(o!=null&&o.update)){var u=!1,h={};lt(()=>{var r=s();rt(r),u&&dt(h,r)&&(h=r,o.update(r))}),u=!0}if(o!=null&&o.destroy)return()=>o.destroy()})}const ae=(a,e={})=>{a.style.opacity="0";const s=setTimeout(()=>{_t(a,e)},e.delay??0);return{destroy(){clearTimeout(s)}}},oe=(a,e="top")=>{const s=e==="top"?gt:wt;a.style.opacity="0",requestAnimationFrame(()=>{s(a)})};function Se(a,e,s=!1){if(!a)return{score:1,matches:[]};if(!e)return null;const o=s?a:a.toLowerCase(),u=s?e:e.toLowerCase();let h=0,r=0;const b=[];let v=-1,m=0;for(let n=0;n<u.length&&r<o.length;n++)u[n]===o[r]&&(b.push(n),h+=1,v===n-1?(m++,h+=m*5):m=0,(n===0||u[n-1]===" "||u[n-1]==="-")&&(h+=10),e[n]===e[n].toUpperCase()&&e[n]!==e[n].toLowerCase()&&(h+=5),v=n,r++);return r!==o.length?null:(h=h/e.length,{score:h,matches:b})}function Te(a,e,s={}){const{keys:o=[],threshold:u=0,limit:h=1/0,caseSensitive:r=!1}=s,b=[];for(const v of e){let m=null;if(typeof v=="string"){const n=Se(a,v,r);n&&n.score>=u&&(m=n)}else if(typeof v=="object"&&v!==null)for(const n of o){const H=v[n];if(typeof H=="string"){const N=Se(a,H,r);N&&N.score>=u&&(!m||N.score>m.score)&&(m={...N,matchedKey:n})}}m&&b.push({item:v,score:m.score,matches:m.matches,matchedKey:m.matchedKey})}return b.sort((v,m)=>m.score-v.score),b.slice(0,h)}function xt(a,e){if(!e.length)return a;let s="",o=0;for(const u of e)s+=a.slice(o,u),s+=`<mark>${a[u]}</mark>`,o=u+1;return s+=a.slice(o),s}class Ct{constructor(){Q(this,"politeRegion",null);Q(this,"assertiveRegion",null);Q(this,"timeouts",new Map);typeof window<"u"&&this.initialize()}initialize(){this.politeRegion&&this.assertiveRegion||(this.politeRegion=document.createElement("div"),this.politeRegion.setAttribute("role","status"),this.politeRegion.setAttribute("aria-live","polite"),this.politeRegion.setAttribute("aria-atomic","true"),this.politeRegion.className="sr-only",this.politeRegion.style.cssText=`
			position: absolute;
			left: -10000px;
			width: 1px;
			height: 1px;
			overflow: hidden;
		`,this.assertiveRegion=document.createElement("div"),this.assertiveRegion.setAttribute("role","alert"),this.assertiveRegion.setAttribute("aria-live","assertive"),this.assertiveRegion.setAttribute("aria-atomic","true"),this.assertiveRegion.className="sr-only",this.assertiveRegion.style.cssText=`
			position: absolute;
			left: -10000px;
			width: 1px;
			height: 1px;
			overflow: hidden;
		`,document.body?(document.body.appendChild(this.politeRegion),document.body.appendChild(this.assertiveRegion)):document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(this.politeRegion),document.body.appendChild(this.assertiveRegion)}))}announce(e,s={}){const{priority:o="polite",delay:u=0,clearAfter:h=1e3}=s;this.initialize();const r=o==="assertive"?this.assertiveRegion:this.politeRegion;if(!r)return;const b=o,v=this.timeouts.get(b);v&&clearTimeout(v);const m=setTimeout(()=>{if(r.textContent=e,h>0){const n=setTimeout(()=>{r.textContent=""},h);this.timeouts.set(b,n)}},u);this.timeouts.set(b,m)}polite(e,s={}){this.announce(e,{...s,priority:"polite"})}assertive(e,s={}){this.announce(e,{...s,priority:"assertive"})}clear(){this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.politeRegion&&(this.politeRegion.textContent=""),this.assertiveRegion&&(this.assertiveRegion.textContent="")}destroy(){var e,s;this.clear(),(e=this.politeRegion)==null||e.remove(),(s=this.assertiveRegion)==null||s.remove(),this.politeRegion=null,this.assertiveRegion=null}}const Rt=new Ct;function F(a,e){Rt.announce(a,e)}var Mt=A('<kbd class="command-palette__shortcut svelte-6skdhl"> </kbd>'),St=A('<div class="command-palette__empty svelte-6skdhl"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-6skdhl"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" opacity="0.3"></circle><path d="M8 12h8M12 8v8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.5"></path></svg> <p class="svelte-6skdhl"> </p></div>'),Tt=A("<i></i>"),It=A('<div class="command-palette__item-icon svelte-6skdhl"><!></div>'),At=A('<div class="command-palette__item-description svelte-6skdhl"><!></div>'),Et=A('<div class="command-palette__item-badge svelte-6skdhl">Recent</div>'),Lt=A('<button type="button" role="option"><div class="command-palette__item-content svelte-6skdhl"><!> <div class="command-palette__item-text svelte-6skdhl"><div class="command-palette__item-label svelte-6skdhl"><!></div> <!></div> <!></div></button>'),Vt=A('<div class="command-palette__group svelte-6skdhl"><div class="command-palette__group-label svelte-6skdhl"> </div> <!></div>'),Kt=A('<div class="command-palette svelte-6skdhl" role="dialog" aria-modal="true" aria-label="Command palette"><!> <div class="command-palette__container svelte-6skdhl"><div class="command-palette__header svelte-6skdhl"><div class="command-palette__search svelte-6skdhl"><svg class="command-palette__search-icon svelte-6skdhl" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <input type="text" class="command-palette__input svelte-6skdhl" role="combobox" aria-expanded="true" aria-controls="command-palette-listbox" aria-autocomplete="list"/> <!></div></div> <div class="command-palette__content svelte-6skdhl" id="command-palette-listbox" role="listbox"><!></div> <div class="command-palette__footer svelte-6skdhl"><div class="command-palette__hints svelte-6skdhl"><span class="svelte-6skdhl"><kbd class="svelte-6skdhl">↑</kbd> <kbd class="svelte-6skdhl">↓</kbd> Navigate</span> <span class="svelte-6skdhl"><kbd class="svelte-6skdhl">↵</kbd> Select</span> <span class="svelte-6skdhl"><kbd class="svelte-6skdhl">Esc</kbd> Close</span></div></div></div></div>');function Dt(a,e){ct(e,!0);let s=C(e,"commands",19,()=>[]),o=C(e,"groups",19,()=>[]),u=C(e,"open",15,!1),h=C(e,"placeholder",3,"Type a command or search..."),r=C(e,"showRecent",3,!0),b=C(e,"maxRecent",3,5),v=C(e,"shortcut",3,"k"),m=C(e,"shortcutModifier",3,"meta"),n=C(e,"enableShortcut",3,!0),H=C(e,"emptyMessage",3,"No commands found"),N=C(e,"blur",3,!0),M=W(""),y=W(0),X=W(void 0),E=W(ut([]));ge(()=>{if(r()){const t=localStorage.getItem("command-palette-recent");if(t)try{_(E,JSON.parse(t),!0)}catch{_(E,[],!0)}}});const ne=z(()=>{let t=[];if(i(M).trim()){const l=Te(i(M),s(),{keys:["label","description"],threshold:.1,limit:50}),p=s().filter(d=>d.keywords?d.keywords.some(V=>V.toLowerCase().includes(i(M).toLowerCase())):!1),f=new Set;for(const d of l)f.has(d.item.id)||(t.push(d.item),f.add(d.item.id));for(const d of p)f.has(d.id)||(t.push(d),f.add(d.id))}else if(r()&&i(E).length>0){const l=new Set(i(E).slice(0,b())),p=s().filter(d=>l.has(d.id)),f=s().filter(d=>!l.has(d.id));t=[...p,...f]}else t=[...s()];return t}),Ie=z(()=>{const t=new Map;for(const p of i(ne)){const f=p.group||"default";t.has(f)||t.set(f,[]),t.get(f).push(p)}return Array.from(t.entries()).sort((p,f)=>{const d=o().find(P=>P.id===p[0]),V=o().find(P=>P.id===f[0]),T=(d==null?void 0:d.priority)??999,Z=(V==null?void 0:V.priority)??999;return T-Z})}),S=z(()=>i(ne).filter(t=>!t.disabled));function le(t){if(!n())return;(m()==="meta"?t.metaKey||t.ctrlKey:t[`${m()}Key`])&&t.key.toLowerCase()===v().toLowerCase()&&(t.preventDefault(),Ae())}ge(()=>(window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)));function Ae(){var t;u(!0),_(M,""),_(y,0),(t=e.onOpen)==null||t.call(e),setTimeout(()=>{var l;return(l=i(X))==null?void 0:l.focus()},10),F("Command palette opened",{priority:"polite"})}function Y(){var t;u(!1),_(M,""),_(y,0),(t=e.onClose)==null||t.call(e),F("Command palette closed",{priority:"polite"})}function re(t){var l,p;t.disabled||(r()&&(_(E,[t.id,...i(E).filter(f=>f!==t.id)].slice(0,b()),!0),localStorage.setItem("command-palette-recent",JSON.stringify(i(E)))),(l=t.action)==null||l.call(t),(p=e.onSelect)==null||p.call(e,t),Y(),F(`Executed: ${t.label}`,{priority:"assertive"}))}function Ee(t){var l,p;switch(t.key){case"ArrowDown":t.preventDefault(),_(y,Math.min(i(y)+1,i(S).length-1),!0),J(),F(`${((l=i(S)[i(y)])==null?void 0:l.label)||"Unknown command"}`,{priority:"polite"});break;case"ArrowUp":t.preventDefault(),_(y,Math.max(i(y)-1,0),!0),J(),F(`${((p=i(S)[i(y)])==null?void 0:p.label)||"Unknown command"}`,{priority:"polite"});break;case"Home":t.preventDefault(),_(y,0),J();break;case"End":t.preventDefault(),_(y,i(S).length-1),J();break;case"Enter":t.preventDefault(),i(S)[i(y)]&&re(i(S)[i(y)]);break;case"Escape":t.preventDefault(),Y();break}}function J(){const t=document.querySelector(`.command-palette__item[data-index="${i(y)}"]`);t==null||t.scrollIntoView({block:"nearest",behavior:"smooth"})}function Le(){_(y,0)}function Ve(){Y()}function Ke(t){var l;return t==="default"?"Commands":((l=o().find(p=>p.id===t))==null?void 0:l.label)||t}function De(t){return r()&&i(E).slice(0,b()).includes(t)}function de(t){if(!i(M).trim())return t;const l=Te(i(M),[t],{threshold:0});return l.length>0?xt(t,l[0].matches):t}var ce=te(),ze=ie(ce);{var Ne=t=>{var l=Kt(),p=k(l);bt(p,{onClick:Ve,get blur(){return N()}});var f=I(p,2),d=k(f),V=k(d),T=I(k(V),2);T.__input=Le,T.__keydown=Ee,kt(T,c=>_(X,c),()=>i(X));var Z=I(T,2);{var P=c=>{var R=Mt(),U=k(R);G(B=>se(U,`${m()==="meta"?"⌘":"Ctrl"}
							${B??""}`),[()=>v().toUpperCase()]),x(c,R)};D(Z,c=>{n()&&c(P)})}var Oe=I(d,2),Ge=k(Oe);{var Pe=c=>{var R=St(),U=I(k(R),2),B=k(U);G(()=>se(B,H())),x(c,R)},Ue=c=>{var R=te(),U=ie(R);we(U,17,()=>i(Ie),xe,(B,Be)=>{var ue=z(()=>ft(i(Be),2));let je=()=>i(ue)[0],qe=()=>i(ue)[1];var me=Vt(),pe=k(me),Fe=k(pe),He=I(pe,2);we(He,17,qe,xe,($,g)=>{const fe=z(()=>i(S).findIndex(w=>w.id===i(g).id)),he=z(()=>i(fe)===i(y)),ve=z(()=>De(i(g).id));var L=Lt();let ye;L.__click=()=>re(i(g));var Je=k(L),ke=k(Je);{var Qe=w=>{var K=It(),ee=k(K);{var et=O=>{var j=Tt();G(()=>Re(j,1,vt(i(g).icon),"svelte-6skdhl")),x(O,j)},tt=O=>{var j=te(),it=ie(j);ht(it,()=>i(g).icon),x(O,j)};D(ee,O=>{typeof i(g).icon=="string"?O(et):O(tt,!1)})}x(w,K)};D(ke,w=>{i(g).icon&&w(Qe)})}var be=I(ke,2),_e=k(be),We=k(_e);Ce(We,()=>de(i(g).label));var Xe=I(_e,2);{var Ye=w=>{var K=At(),ee=k(K);Ce(ee,()=>de(i(g).description)),x(w,K)};D(Xe,w=>{i(g).description&&w(Ye)})}var Ze=I(be,2);{var $e=w=>{var K=Et();x(w,K)};D(Ze,w=>{i(ve)&&w($e)})}G(()=>{ye=Re(L,1,"command-palette__item svelte-6skdhl",null,ye,{"command-palette__item--selected":i(he),"command-palette__item--disabled":i(g).disabled,"command-palette__item--recent":i(ve)}),q(L,"data-index",i(fe)),q(L,"aria-selected",i(he)),q(L,"id",i(g).id),L.disabled=i(g).disabled}),x($,L)}),G($=>se(Fe,$),[()=>Ke(je())]),x(B,me)}),x(c,R)};D(Ge,c=>{i(S).length===0?c(Pe):c(Ue,!1)})}Me(f,c=>ae==null?void 0:ae(c)),Me(f,(c,R)=>oe==null?void 0:oe(c,R),()=>"top"),G(()=>{var c;q(T,"placeholder",h()),q(T,"aria-activedescendant",(c=i(S)[i(y)])==null?void 0:c.id)}),yt(T,()=>i(M),c=>_(M,c)),x(t,l)};D(ze,t=>{u()&&t(Ne)})}x(a,ce),mt()}pt(["input","keydown","click"]);Dt.__docgen={data:[{name:"commands",visibility:"public",description:"List of available commands",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"Command[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"groups",visibility:"public",description:"Command groups configuration",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"CommandGroup[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"open",visibility:"public",description:"Whether the palette is open",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"..."},{name:"placeholder",visibility:"public",description:"Placeholder text for search input",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"Type a command or search..."'},{name:"showRecent",visibility:"public",description:"Show recent commands at the top",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"maxRecent",visibility:"public",description:"Maximum recent commands to show",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"5"},{name:"shortcut",visibility:"public",description:"Keyboard shortcut to open (default: 'k' for Cmd/Ctrl+K)",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"k"'},{name:"shortcutModifier",visibility:"public",description:"Modifier key for shortcut (default: 'meta' for Cmd/Ctrl)",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"string",value:"meta",text:'"meta"'},{kind:"const",type:"string",value:"ctrl",text:'"ctrl"'},{kind:"const",type:"string",value:"alt",text:'"alt"'},{kind:"const",type:"string",value:"shift",text:'"shift"'}],text:'"meta" | "ctrl" | "alt" | "shift"'},static:!1,readonly:!1,defaultValue:'"meta"'},{name:"enableShortcut",visibility:"public",description:"Enable keyboard shortcut",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"emptyMessage",visibility:"public",description:"Empty state message",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"No commands found"'},{name:"blur",visibility:"public",description:"Blur background when open",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"onSelect",visibility:"public",description:"Callback when a command is selected",keywords:[],kind:"let",type:{kind:"function",text:"(command: Command) => void"},static:!1,readonly:!1},{name:"onOpen",visibility:"public",description:"Callback when palette opens",keywords:[],kind:"let",type:{kind:"function",text:"() => void"},static:!1,readonly:!1},{name:"onClose",visibility:"public",description:"Callback when palette closes",keywords:[],kind:"let",type:{kind:"function",text:"() => void"},static:!1,readonly:!1}],name:"command-palette.svelte"};export{Dt as C};
