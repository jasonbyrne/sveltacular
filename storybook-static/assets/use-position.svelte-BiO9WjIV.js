var y=Object.defineProperty;var H=e=>{throw TypeError(e)};var C=(e,t,i)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var b=(e,t,i)=>C(e,typeof t!="symbol"?t+"":t,i),V=(e,t,i)=>t.has(e)||H("Cannot "+i);var a=(e,t,i)=>(V(e,t,"read from private field"),i?i.call(e):t.get(e)),c=(e,t,i)=>t.has(e)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i);import{ac as W,i as f,g,h as m}from"./iframe-D7RYvwF5.js";function T(e){const t=e.getBoundingClientRect();return{top:t.top,left:t.left,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}function q(){return{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}}function z(e){const[t,i="center"]=e.split("-");return{side:t,alignment:i||"center"}}function $(e){return{top:"bottom",bottom:"top",left:"right",right:"left"}[e]}function O(e,t,i,o,s){let r=0,n=0;switch(i){case"top":r=e.top-t.height-s,n=e.left;break;case"bottom":r=e.bottom+s,n=e.left;break;case"left":r=e.top,n=e.left-t.width-s;break;case"right":r=e.top,n=e.right+s;break}if(i==="top"||i==="bottom")switch(o){case"start":break;case"center":n=e.left+e.width/2-t.width/2;break;case"end":n=e.right-t.width;break}else switch(o){case"start":break;case"center":r=e.top+e.height/2-t.height/2;break;case"end":r=e.bottom-t.height;break}return{top:r,left:n}}function j(e,t,i,o){const s=e.left+t.width,r=e.top+t.height;return e.top>=i.top+o&&e.left>=i.left+o&&s<=i.right-o&&r<=i.bottom-o}function B(e,t,i){const{placement:o,offset:s=8,autoFlip:r=!0,autoAlign:n=!0,viewportPadding:l=8}=i,u=T(e),h=T(t),d=q();let{side:k,alignment:x}=z(o),p=O(u,h,k,x,s),F=j(p,h,d,l);if(!F&&r){const S=$(k),w=O(u,h,S,x,s);j(w,h,d,l)&&(k=S,p=w,F=!0)}if(!F&&n){const S=["start","center","end"];for(const w of S){if(w===x)continue;const A=O(u,h,k,w,s);if(j(A,h,d,l)){x=w,p=A,F=!0;break}}}return F||(p.left=Math.max(d.left+l,Math.min(p.left,d.right-h.width-l)),p.top=Math.max(d.top+l,Math.min(p.top,d.bottom-h.height-l))),{top:p.top,left:p.left,side:k,alignment:x}}function X(e,t,i,o=8){const s=T(e),r=T(t),n={side:$(i)};if(i==="top"||i==="bottom"){const l=s.left+s.width/2,u=r.left;n.left=l-u-o;const h=o;n.left=Math.max(h,Math.min(n.left,r.width-h-o*2))}else{const l=s.top+s.height/2,u=r.top;n.top=l-u-o;const h=o;n.top=Math.max(h,Math.min(n.top,r.height-h-o*2))}return n}var P,v,E,L,M,I,R;class Y{constructor(t,i,o){c(this,P,f(0));c(this,v,f(0));c(this,E,f("bottom"));c(this,L,f("center"));c(this,M,f(void 0));c(this,I,f(void 0));c(this,R,f("bottom"));b(this,"getReferenceElement");b(this,"getFloatingElement");b(this,"options");b(this,"cleanup",null);b(this,"rafId",null);this.getReferenceElement=t,this.getFloatingElement=i,this.options={enabled:!0,updateOnScroll:!0,updateOnResize:!0,...o}}get top(){return g(a(this,P))}set top(t){m(a(this,P),t,!0)}get left(){return g(a(this,v))}set left(t){m(a(this,v),t,!0)}get side(){return g(a(this,E))}set side(t){m(a(this,E),t,!0)}get alignment(){return g(a(this,L))}set alignment(t){m(a(this,L),t,!0)}get arrowTop(){return g(a(this,M))}set arrowTop(t){m(a(this,M),t,!0)}get arrowLeft(){return g(a(this,I))}set arrowLeft(t){m(a(this,I),t,!0)}get arrowSide(){return g(a(this,R))}set arrowSide(t){m(a(this,R),t,!0)}update(){this.rafId!==null&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{if(this.rafId=null,!this.options.enabled)return;const t=this.getReferenceElement(),i=this.getFloatingElement();if(!t||!i)return;const o=B(t,i,this.options);if(this.top=o.top,this.left=o.left,this.side=o.side,this.alignment=o.alignment,this.options.arrow){const s=X(t,i,o.side,this.options.arrowSize);this.arrowTop=s.top,this.arrowLeft=s.left,this.arrowSide=s.side}})}start(){this.stop(),this.update();const t=[];if(this.options.updateOnScroll){const i=()=>this.update();window.addEventListener("scroll",i,{passive:!0}),t.push(()=>window.removeEventListener("scroll",i))}if(this.options.updateOnResize){const i=()=>this.update();window.addEventListener("resize",i,{passive:!0}),t.push(()=>window.removeEventListener("resize",i))}this.cleanup=()=>{t.forEach(i=>i()),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null)}}stop(){this.cleanup&&(this.cleanup(),this.cleanup=null)}setOptions(t){this.options={...this.options,...t},this.update()}get style(){return`position: fixed; top: ${this.top}px; left: ${this.left}px;`}get arrowStyle(){const t=["position: absolute;"];switch(this.arrowLeft!==void 0&&t.push(`left: ${this.arrowLeft}px;`),this.arrowTop!==void 0&&t.push(`top: ${this.arrowTop}px;`),this.arrowSide){case"top":t.push("bottom: calc(100% - 1px);");break;case"bottom":t.push("top: calc(100% - 1px);");break;case"left":t.push("right: calc(100% - 1px);");break;case"right":t.push("left: calc(100% - 1px);");break}return t.join(" ")}}P=new WeakMap,v=new WeakMap,E=new WeakMap,L=new WeakMap,M=new WeakMap,I=new WeakMap,R=new WeakMap;function K(e,t,i){const o=new Y(e,t,i);return W(()=>(o.start(),()=>o.stop())),o}export{K as u};
